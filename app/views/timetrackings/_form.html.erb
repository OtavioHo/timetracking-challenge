<%= form_with(model: timetracking, local: true) do |form| %>
  <% if timetracking.errors.any? %>
    <div id="error_explanation" class="alert alert-danger" style="margin-top:15px">
      <h2 class="alert-header"><%= pluralize(timetracking.errors.count, "error") %> prohibited this timetracking from being saved:</h2>
      <hr>
      <ul>
      <% timetracking.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field" style="display: none;">
    <%= form.label :latitude%>
    <%= form.text_field :latitude, :value=>0, :id=>'latitude' %>
  </div>

  <div class="field" style="display: none;">
    <%= form.label :longitude%>
    <%= form.text_field :longitude, :value=>0, :id=>'longitude'%>
  </div>

  <div class="form-group" style="margin-top: 15px;">
    <div class="field">
      <label for="comments">Comments</label>
      <%= form.text_field :comments, :class=>"form-control", :id=>"comments"%>
    </div>
  </div>

  <div class="form-group">
    <div class="actions" >
      <%= form.submit :class=>"btn btn-primary", :id=>"submit" %>
    </div>
  </div>
<% end %>

<script type='text/javascript'>

var getLocation = function () {
  navigator.geolocation.getCurrentPosition(function(position) {
    document.getElementById("latitude").value = position.coords.latitude;
    document.getElementById("longitude").value = position.coords.longitude;
  })
}

getLocation();
</script>

